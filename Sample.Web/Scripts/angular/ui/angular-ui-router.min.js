/**
 * State-based routing for AngularJS
 * @version v0.3.1
 * @link http://angular-ui.github.com/
 * @license MIT License, http://www.opensource.org/licenses/MIT
 */
typeof module!="undefined"&&typeof exports!="undefined"&&module.exports===exports&&(module.exports="ui.router"),function(n,t,i){"use strict";function w(n,t){return u(new(u(function(){},{prototype:n})),t)}function g(n){return f(arguments,function(t){t!==n&&f(t,function(t,i){n.hasOwnProperty(i)||(n[i]=t)})}),n}function ii(n,t){var r=[];for(var i in n.path){if(n.path[i]!==t.path[i])break;r.push(n.path[i])}return r}function p(n){if(Object.keys)return Object.keys(n);var t=[];return f(n,function(n,i){t.push(i)}),t}function c(n,t){if(Array.prototype.indexOf)return n.indexOf(t,Number(arguments[2])||0);var r=n.length>>>0,i=Number(arguments[2])||0;for(i=i<0?Math.ceil(i):Math.floor(i),i<0&&(i+=r);i<r;i++)if(i in n&&n[i]===t)return i;return-1}function ut(n,t,i,r){var o=ii(i,r),f,h={},l=[],s,e;for(s in o)if(o[s]&&o[s].params&&(f=p(o[s].params),f.length))for(e in f)c(l,f[e])>=0||(l.push(f[e]),h[f[e]]=n[f[e]]);return u({},h,t)}function nt(n,t,i){var f,r,u;if(!i){i=[];for(f in n)i.push(f)}for(r=0;r<i.length;r++)if(u=i[r],n[u]!=t[u])return!1;return!0}function b(n,t){var i={};return f(n,function(n){i[n]=t[n]}),i}function ft(n){var t={},i=Array.prototype.concat.apply(Array.prototype,Array.prototype.slice.call(arguments,1));return f(i,function(i){i in n&&(t[i]=n[i])}),t}function k(n){var i={},r=Array.prototype.concat.apply(Array.prototype,Array.prototype.slice.call(arguments,1));for(var t in n)c(r,t)==-1&&(i[t]=n[t]);return i}function tt(n,t){var r=a(n),i=r?[]:{};return f(n,function(n,u){t(n,u)&&(i[r?i.length:u]=n)}),i}function y(n,t){var i=a(n)?[]:{};return f(n,function(n,r){i[r]=t(n,r)}),i}function et(n,t){var h=1,l=2,o={},a=[],v=o,y=u(n.when(o),{$$promises:o,$$values:o});this.study=function(o){function tt(n,i){if(d[i]!==l){if(b.push(i),d[i]===h){b.splice(0,c(b,i));throw new Error("Cyclic dependency: "+b.join(" -> "));}if(d[i]=h,e(n))w.push(i,[function(){return t.get(n)}],a);else{var r=t.annotate(n);f(r,function(n){n!==i&&o.hasOwnProperty(n)&&tt(o[n],n)});w.push(i,n,r)}b.pop();d[i]=l}}function it(n){return s(n)&&n.then&&n.$$promises}if(!s(o))throw new Error("'invocables' must be an object");var nt=p(o||{}),w=[],b=[],d={};return f(o,tt),o=b=d=null,function(e,o,h){function b(){--ft||(rt||g(l,o.$$values),c.$$values=l,c.$$promises=c.$$promises||!0,delete c.$$inheritedValues,d.resolve(l))}function tt(n){c.$$failure=n;d.reject(n)}function et(i,u,o){function v(n){s.reject(n);tt(n)}function y(){if(!r(c.$$failure))try{s.resolve(t.invoke(u,h,l));s.promise.then(function(n){l[i]=n;b()},v)}catch(n){v(n)}}var s=n.defer(),a=0;f(o,function(n){p.hasOwnProperty(n)&&!e.hasOwnProperty(n)&&(a++,p[n].then(function(t){l[n]=t;--a||y()},v))});a||y();p[i]=s.promise}var a,ut;if(it(e)&&h===i&&(h=o,o=e,e=null),e){if(!s(e))throw new Error("'locals' must be an object");}else e=v;if(o){if(!it(o))throw new Error("'parent' must be a promise returned by $resolve.resolve()");}else o=y;var d=n.defer(),c=d.promise,p=c.$$promises={},l=u({},e),ft=1+w.length/3,rt=!1;if(r(o.$$failure))return tt(o.$$failure),c;for(o.$$inheritedValues&&g(l,k(o.$$inheritedValues,nt)),u(p,o.$$promises),o.$$values?(rt=g(l,k(o.$$values,nt)),c.$$inheritedValues=k(o.$$values,nt),b()):(o.$$inheritedValues&&(c.$$inheritedValues=k(o.$$inheritedValues,nt)),o.then(b,tt)),a=0,ut=w.length;a<ut;a+=3)e.hasOwnProperty(w[a])?b():et(w[a],w[a+1],w[a+2]);return c}};this.resolve=function(n,t,i,r){return this.study(n)(t,i,r)}}function ot(n,t,i){this.fromConfig=function(n,t,i){return r(n.template)?this.fromString(n.template,t):r(n.templateUrl)?this.fromUrl(n.templateUrl,t):r(n.templateProvider)?this.fromProvider(n.templateProvider,t,i):null};this.fromString=function(n,t){return o(n)?n(t):n};this.fromUrl=function(i,r){return o(i)&&(i=i(r)),i==null?null:n.get(i,{cache:t,headers:{Accept:"text/html"}}).then(function(n){return n.data})};this.fromProvider=function(n,t,r){return i.invoke(n,null,r||{params:t})}}function v(n,t,r){function nt(t,i,r,u){if(g.push(t),d[t])return d[t];if(!/^\w+([-.]+\w+)*(?:\[\])?$/.test(t))throw new Error("Invalid parameter name '"+t+"' in pattern '"+n+"'");if(b[t])throw new Error("Duplicate parameter name '"+t+"' in pattern '"+n+"'");return b[t]=new l.Param(t,i,r,u),b[t]}function tt(n,t,i,r){var u=["",""],f=n.replace(/[\\\[\]\^$*+?.()|{}]/g,"\\$&");if(!t)return f;switch(i){case!1:u=["(",")"+(r?"?":"")];break;case!0:f=f.replace(/\/$/,"");u=["(?:/(",")|/)?"];break;default:u=["("+i+"|",")?"]}return f+u[0]+t+u[1]}function it(r,u){var e,f,s,h,c;return e=r[2]||r[3],c=t.params[e],s=n.substring(o,r.index),f=u?r[4]:r[4]||(r[1]=="*"?".*":null),f&&(h=l.type(f)||w(l.type("string"),{pattern:new RegExp(f,t.caseInsensitive?"i":i)})),{id:e,regexp:f,segment:s,type:h,cfg:c}}var f,h,e,c,k;t=u({params:{}},s(t)?t:{});var v=/([:*])([\w\[\]]+)|\{([\w\[\]]+)(?:\:\s*((?:[^{}\\]+|\\.|\{(?:[^{}\\]+|\\.)*\})+))?\}/g,rt=/([:]?)([\w\[\].-]+)|\{([\w\[\].-]+)(?:\:\s*((?:[^{}\\]+|\\.|\{(?:[^{}\\]+|\\.)*\})+))?\}/g,y="^",o=0,a,p=this.segments=[],d=r?r.params:{},b=this.params=r?r.params.$$new():new l.ParamSet,g=[];for(this.source=n;a=v.exec(n);){if(f=it(a,!1),f.segment.indexOf("?")>=0)break;h=nt(f.id,f.type,f.cfg,"path");y+=tt(f.segment,h.type.pattern.source,h.squash,h.isOptional);p.push(f.segment);o=v.lastIndex}if(e=n.substring(o),c=e.indexOf("?"),c>=0){if(k=this.sourceSearch=e.substring(c),e=e.substring(0,c),this.sourcePath=n.substring(0,o+c),k.length>0)for(o=0;a=rt.exec(k);)f=it(a,!0),h=nt(f.id,f.type,f.cfg,"search"),o=v.lastIndex}else this.sourcePath=n,this.sourceSearch="";y+=tt(e)+(t.strict===!1?"/?":"")+"$";p.push(e);this.regexp=new RegExp(y,t.caseInsensitive?"i":i);this.prefix=p[0];this.$$paramNames=g}function h(n){u(this,n)}function st(){function rt(n){return n!=null?n.toString().replace(/~/g,"~~").replace(/\//g,"~2F"):n}function ht(n){return n!=null?n.toString().replace(/~2F/g,"/").replace(/~~/g,"~"):n}function ct(){return{strict:g,caseInsensitive:d}}function et(n){return o(n)||a(n)&&o(n[n.length-1])}function ot(){while(it.length){var i=it.shift();if(i.pattern)throw new Error("You cannot override a type's .pattern at runtime.");t.extend(n[i.name],b.invoke(i.def))}}function k(n){u(this,n||{})}l=this;var d=!1,g=!0,nt=!1;var n={},ut=!0,it=[],b,ft={string:{encode:rt,decode:ht,is:function(n){return n==null||!r(n)||typeof n=="string"},pattern:/[^/]*/},int:{encode:rt,decode:function(n){return parseInt(n,10)},is:function(n){return r(n)&&this.decode(n.toString())===n},pattern:/\d+/},bool:{encode:function(n){return n?1:0},decode:function(n){return parseInt(n,10)!==0},is:function(n){return n===!0||n===!1},pattern:/0|1/},date:{encode:function(n){return this.is(n)?[n.getFullYear(),("0"+(n.getMonth()+1)).slice(-2),("0"+n.getDate()).slice(-2)].join("-"):i},decode:function(n){if(this.is(n))return n;var t=this.capture.exec(n);return t?new Date(t[1],t[2]-1,t[3]):i},is:function(n){return n instanceof Date&&!isNaN(n.valueOf())},equals:function(n,t){return this.is(n)&&this.is(t)&&n.toISOString()===t.toISOString()},pattern:/[0-9]{4}-(?:0[1-9]|1[0-2])-(?:0[1-9]|[1-2][0-9]|3[0-1])/,capture:/([0-9]{4})-(0[1-9]|1[0-2])-(0[1-9]|[1-2][0-9]|3[0-1])/},json:{encode:t.toJson,decode:t.fromJson,is:t.isObject,equals:t.equals,pattern:/[^/]*/},any:{encode:t.identity,decode:t.identity,equals:t.equals,pattern:/.*/}};st.$$getDefaultValue=function(n){if(!et(n.value))return n.value;if(!b)throw new Error("Injectable functions cannot be called at configuration time");return b.invoke(n.value)};this.caseInsensitive=function(n){return r(n)&&(d=n),d};this.strictMode=function(n){return r(n)&&(g=n),g};this.defaultSquashPolicy=function(n){if(!r(n))return nt;if(n!==!0&&n!==!1&&!e(n))throw new Error("Invalid squash policy: "+n+". Valid policies: false, true, arbitrary-string");return nt=n,n};this.compile=function(n,t){return new v(n,u(ct(),t))};this.isMatcher=function(n){if(!s(n))return!1;var t=!0;return f(v.prototype,function(i,u){o(i)&&(t=t&&r(n[u])&&o(n[u]))}),t};this.type=function(t,i,f){if(!r(i))return n[t];if(n.hasOwnProperty(t))throw new Error("A type named '"+t+"' has already been defined.");return n[t]=new h(u({name:t},i)),f&&(it.push({name:t,def:f}),ut||ot()),this};f(ft,function(t,i){n[i]=new h(u({name:i},t))});n=w(n,{});this.$get=["$injector",function(t){return b=t,ut=!1,ot(),f(ft,function(t,i){n[i]||(n[i]=new h(t))}),this}];this.Param=function(f,o,l,v){function rt(n){var t=s(n)?p(n):[],i=c(t,"value")===-1&&c(t,"type")===-1&&c(t,"squash")===-1&&c(t,"array")===-1;return i&&(n={value:n}),n.$$fn=et(n.value)?n.value:function(){return n.value},n}function ut(i,r,u){if(i.type&&r)throw new Error("Param '"+f+"' has two type configurations.");return r?r:i.type?t.isString(i.type)?n[i.type]:i.type instanceof h?i.type:new h(i.type):u==="config"?n.any:n.string}function ft(){var n={array:v==="search"?"auto":!1},t=f.match(/\[\]$/)?{array:!0}:{};return u(n,t,l).array}function ot(n,t){var i=n.squash;if(!t||i===!1)return!1;if(!r(i)||i==null)return nt;if(i===!0||e(i))return i;throw new Error("Invalid squash policy: '"+i+"'. Valid policies: false, true, or arbitrary string");}function st(n,t,r,u){var f,o,s=[{from:"",to:r||t?i:""},{from:null,to:r||t?i:""}];return f=a(n.replace)?n.replace:[],e(u)&&f.push({from:u,to:i}),o=y(f,function(n){return n.from}),tt(s,function(n){return c(o,n.from)===-1}).concat(f)}function ht(){if(!b)throw new Error("Injectable functions cannot be called at configuration time");var n=b.invoke(l.$$fn);if(n!==null&&n!==i&&!k.type.is(n))throw new Error("Default value ("+n+") for parameter '"+k.id+"' is not an instance of Type ("+k.type.name+")");return n}function ct(n){function t(n){return function(t){return t.from===n}}function i(n){var i=y(tt(k.replace,t(n)),function(n){return n.to});return i.length?i[0]:n}return n=i(n),r(n)?k.type.$normalize(n):ht()}function lt(){return"{Param:"+f+" "+o+" squash: '"+g+"' optional: "+d+"}"}var k=this,w;l=rt(l);o=ut(l,o,v);w=ft();o=w?o.$asArray(w,v==="search"):o;o.name!=="string"||w||v!=="path"||l.value!==i||(l.value="");var d=l.value!==i,g=ot(l,d),it=st(l,w,d,g);u(this,{id:f,type:o,location:v,array:w,squash:g,replace:it,isOptional:d,value:ct,dynamic:i,config:l,toString:lt})};k.prototype={$$new:function(){return w(this,u(new k,{$$parent:this}))},$$keys:function(){for(var t=[],i=[],n=this,r=p(k.prototype);n;)i.push(n),n=n.$$parent;return i.reverse(),f(i,function(n){f(p(n),function(n){c(t,n)===-1&&c(r,n)===-1&&t.push(n)})}),t},$$values:function(n){var t={},i=this;return f(i.$$keys(),function(r){t[r]=i[r].value(n&&n[r])}),t},$$equals:function(n,t){var i=!0,r=this;return f(r.$$keys(),function(u){var f=n&&n[u],e=t&&t[u];r[u].type.equals(f,e)||(i=!1)}),i},$$validates:function(n){for(var e=this.$$keys(),r,f,o,s,u=0;u<e.length;u++){if(r=this[e[u]],f=n[e[u]],(f===i||f===null)&&r.isOptional)break;if((o=r.type.$normalize(f),!r.type.is(o))||(s=r.type.encode(o),t.isString(s)&&!r.type.pattern.exec(s)))return!1}return!0},$$parent:i};this.ParamSet=k}function ht(n,f){function p(n){var t=/^\^((?:\\[^a-zA-Z0-9]|[^\\\[\]\^$*+?.()|{}]+)*)/.exec(n.source);return t!=null?t[1].replace(/\\(.)/g,"$1"):""}function w(n,t){return n.replace(/\$(\$|\d{1,2})/,function(n,i){return t[i==="$"?0:Number(i)]})}function v(n,t,i){if(!i)return!1;var u=n.invoke(t,t,{$match:i});return r(u)?u:!0}function y(r,u,f,o,a){function k(n,t,i){return y==="/"?n:t?y.slice(0,-1)+n:i?y.slice(1)+n:n}function w(n){function u(n){var t=n(f,r);return t?(e(t)&&r.replace().url(t),!0):!1}var c,o,t;if(!n||!n.defaultPrevented){for(c=v&&r.url()===v,v=i,o=s.length,t=0;t<o;t++)if(u(s[t]))return;h&&u(h)}}function b(){return c=c||u.$on("$locationChangeSuccess",w)}var y=o.baseHref(),p=r.url(),v;return l||b(),{sync:function(){w()},listen:function(){return b()},update:function(n){if(n){p=r.url();return}r.url()!==p&&(r.url(p),r.replace())},push:function(n,t,u){var f=n.format(t||{});f!==null&&t&&t["#"]&&(f+="#"+t["#"]);r.url(f);v=u&&u.$$avoidResync?r.url():i;u&&u.replace&&r.replace()},href:function(i,u,f){var o,e,h,s;return i.validates(u)?(o=n.html5Mode(),t.isObject(o)&&(o=o.enabled),o=o&&a.history,e=i.format(u),f=f||{},o||e===null||(e="#"+n.hashPrefix()+e),e!==null&&u&&u["#"]&&(e+="#"+u["#"]),e=k(e,o,f.absolute),!f.absolute||!e)?e:(h=!o&&e?"/":"",s=r.port(),s=s===80||s===443?"":":"+s,[r.protocol(),"://",r.host(),s,h,e].join("")):null}}}var s=[],h=null,l=!1,c;this.rule=function(n){if(!o(n))throw new Error("'rule' must be a function");return s.push(n),this};this.otherwise=function(n){if(e(n)){var t=n;n=function(){return t}}else if(!o(n))throw new Error("'rule' must be a function");return h=n,this};this.when=function(n,t){var i,r=e(t),c,s,h;if(e(n)&&(n=f.compile(n)),!r&&!o(t)&&!a(t))throw new Error("invalid 'handler' in when()");c={matcher:function(n,t){return r&&(i=f.compile(t),t=["$match",function(n){return i.format(n)}]),u(function(i,r){return v(i,t,n.exec(r.path(),r.search()))},{prefix:e(n.prefix)?n.prefix:""})},regex:function(n,t){if(n.global||n.sticky)throw new Error("when() RegExp must not be global or sticky");return r&&(i=t,t=["$match",function(n){return w(i,n)}]),u(function(i,r){return v(i,t,n.exec(r.path()))},{prefix:p(n)})}};s={matcher:f.isMatcher(n),regex:n instanceof RegExp};for(h in s)if(s[h])return this.rule(c[h](n,t));throw new Error("invalid 'what' in when()");};this.deferIntercept=function(n){n===i&&(n=!0);l=n};this.$get=y;y.$inject=["$location","$rootScope","$injector","$browser","$sniffer"]}function ct(n,h){function ht(n){return n.indexOf(".")===0||n.indexOf("^")===0}function g(n,t){var s;if(!n)return i;var h=e(n),u=h?n:n.name,c=ht(u);if(c){if(!t)throw new Error("No reference point given for path '"+u+"'");t=g(t);for(var r=u.split("."),f=0,l=r.length,o=t;f<l;f++){if(r[f]===""&&f===0){o=t;continue}if(r[f]==="^"){if(!o.parent)throw new Error("Path '"+u+"' not valid for state '"+t.name+"'");o=o.parent;continue}break}r=r.slice(f).join(".");u=o.name+(o.name&&r?".":"")+r}return(s=it[u],s&&(h||!h&&(s===n||s.self===n)))?s:i}function ct(n,t){rt[n]||(rt[n]=[]);rt[n].push(t)}function lt(n){for(var t=rt[n]||[];t.length;)et(t.shift())}function et(t){var i,u,r;if(t=w(t,{self:t,resolve:t.resolve||{},toString:function(){return this.name}}),i=t.name,!e(i)||i.indexOf("@")>=0)throw new Error("State must have a valid name");if(it.hasOwnProperty(i))throw new Error("State '"+i+"' is already defined");if(u=i.indexOf(".")!==-1?i.substring(0,i.lastIndexOf(".")):e(t.parent)?t.parent:s(t.parent)&&e(t.parent.name)?t.parent.name:"",u&&!it[u])return ct(u,t.self);for(r in k)o(k[r])&&(t[r]=k[r](t,k.$delegates[r]));return it[i]=t,!t[ot]&&t.url&&n.when(t.url,["$match","$stateParams",function(n,i){v.$current.navigable==t&&nt(n,i)||v.transitionTo(t,n,{inherit:!0,location:!1})}]),lt(i),t}function at(n){return n.indexOf("*")>-1}function vt(n){for(var t=n.split("."),i=v.$current.name.split("."),r=0,u=t.length;r<u;r++)t[r]==="*"&&(i[r]="*");return(t[0]==="**"&&(i=i.slice(c(i,t[1])),i.unshift("**")),t[t.length-1]==="**"&&(i.splice(c(i,t[t.length-2])+1,Number.MAX_VALUE),i.push("**")),t.length!=i.length)?!1:i.join("")===t.join("")}function yt(n,t){return e(n)&&!r(t)?k[n]:!o(t)||!e(n)?this:(k[n]&&!k.$delegates[n]&&(k.$delegates[n]=k[n]),k[n]=t,this)}function pt(n,t){return s(n)?t=n:t.name=n,et(t),this}function st(n,h,c,l,k,rt,ft){function lt(t,i,r,u){var e=n.$broadcast("$stateNotFound",t,i,r),f;return e.defaultPrevented?(ft.update(),st):e.retry?u.$retry?(ft.update(),ht):(f=v.transition=h.when(e.retry),f.then(function(){return f!==v.transition?et:(t.options.$retry=!0,v.transitionTo(t.to,t.toParams,t.options))},function(){return st}),ft.update(),f):null}function yt(n,i,r,u,e,s){function w(){var i=[];return f(n.views,function(r,u){var f=r.resolve&&r.resolve!==n.resolve?r.resolve:{};f.$template=[function(){return c.load(u,{view:r,locals:e.globals,params:y,notify:s.notify})||""}];i.push(k.resolve(f,e.globals,e.resolve,n).then(function(i){if(o(r.controllerProvider)||a(r.controllerProvider)){var s=t.extend({},f,e.globals);i.$$controller=l.invoke(r.controllerProvider,null,s)}else i.$$controller=r.controller;i.$$state=n;i.$$controllerAs=r.controllerAs;i.$$resolveAs=r.resolveAs;e[u]=i}))}),h.all(i).then(function(){return e.globals})}var y=r?i:b(n.params.$$keys(),i),p={$stateParams:y},v;return e.resolve=k.resolve(n.resolve,p,e.resolve,n),v=[e.resolve.then(function(n){e.globals=n})],u&&v.push(u),h.all(v).then(w).then(function(){return e})}var et=h.reject(new Error("transition superseded")),ct=h.reject(new Error("transition prevented")),st=h.reject(new Error("transition aborted")),ht=h.reject(new Error("transition failed"));return tt.locals={resolve:null,globals:{$stateParams:{}}},v={params:{},current:tt.self,$current:tt,transition:null},v.reload=function(n){return v.transitionTo(v.current,rt,{reload:n||!0,inherit:!1,notify:!0})},v.go=function(n,t,i){return v.transitionTo(n,t,u({inherit:!0,relative:v.$current},i))},v.transitionTo=function(t,i,f){var st,dt,gt,bt,at,kt;i=i||{};f=u({location:!0,inherit:!1,relative:null,notify:!0,reload:!1,$retry:!1},f||{});var y=v.$current,p=v.params,it=y.path,ni,a=g(t,f.relative),vt=i["#"];if(!r(a)){if(st={to:t,toParams:i,options:f},dt=lt(st,y.self,p,f),dt)return dt;if(t=st.to,i=st.toParams,f=st.options,a=g(t,f.relative),!r(a)){if(!f.relative)throw new Error("No such state '"+t+"'");throw new Error("Could not resolve '"+t+"' from state '"+f.relative+"'");}}if(a[ot])throw new Error("Cannot transition to abstract state '"+t+"'");if(f.inherit&&(i=ut(rt,i||{},v.$current,a)),!a.params.$$validates(i))return ht;i=a.params.$$values(i);t=a;var k=t.path,c=0,o=k[c],nt=tt.locals,pt=[];if(f.reload){if(e(f.reload)||s(f.reload)){if(s(f.reload)&&!f.reload.name)throw new Error("Invalid reload state object");if(gt=f.reload===!0?it[0]:g(f.reload),f.reload&&!gt)throw new Error("No such reload state '"+(e(f.reload)?f.reload:f.reload.name)+"'");while(o&&o===it[c]&&o!==gt)nt=pt[c]=o.locals,c++,o=k[c]}}else while(o&&o===it[c]&&o.ownParams.$$equals(i,p))nt=pt[c]=o.locals,c++,o=k[c];if(wt(t,i,y,p,nt,f))return vt&&(i["#"]=vt),v.params=i,d(v.params,rt),d(b(t.params.$$keys(),rt),t.locals.globals.$stateParams),f.location&&t.navigable&&t.navigable.url&&(ft.push(t.navigable.url,i,{$$avoidResync:!0,replace:f.location==="replace"}),ft.update(!0)),v.transition=null,h.when(v.current);if(i=b(t.params.$$keys(),i||{}),vt&&(i["#"]=vt),f.notify&&n.$broadcast("$stateChangeStart",t.self,i,y.self,p,f).defaultPrevented)return n.$broadcast("$stateChangeCancel",t.self,i,y.self,p),v.transition==null&&ft.update(),ct;for(bt=h.when(nt),at=c;at<k.length;at++,o=k[at])nt=pt[at]=w(nt),bt=yt(o,i,o===t,bt,nt,f);return kt=v.transition=bt.then(function(){var r,u,e;if(v.transition!==kt)return et;for(r=it.length-1;r>=c;r--)e=it[r],e.self.onExit&&l.invoke(e.self.onExit,e.self,e.locals.globals),e.locals=null;for(r=c;r<k.length;r++)u=k[r],u.locals=pt[r],u.self.onEnter&&l.invoke(u.self.onEnter,u.self,u.locals.globals);return v.transition!==kt?et:(v.$current=t,v.current=t.self,v.params=i,d(v.params,rt),v.transition=null,f.location&&t.navigable&&ft.push(t.navigable.url,t.navigable.locals.globals.$stateParams,{$$avoidResync:!0,replace:f.location==="replace"}),f.notify&&n.$broadcast("$stateChangeSuccess",t.self,i,y.self,p),ft.update(!0),v.current)}).then(null,function(r){return v.transition!==kt?et:(v.transition=null,ni=n.$broadcast("$stateChangeError",t.self,i,y.self,p,r),ni.defaultPrevented||ft.update(),h.reject(r))})},v.is=function(n,t,f){f=u({relative:v.$current},f||{});var e=g(n,f.relative);return r(e)?v.$current!==e?!1:t?nt(e.params.$$values(t),rt):!0:i},v.includes=function(n,t,f){if(f=u({relative:v.$current},f||{}),e(n)&&at(n)){if(!vt(n))return!1;n=v.$current.name}var o=g(n,f.relative);return r(o)?r(v.$current.includes[o.name])?t?nt(o.params.$$values(t),rt,p(t)):!0:!1:i},v.href=function(n,t,f){var e,o;return(f=u({lossy:!0,inherit:!0,absolute:!1,relative:v.$current},f||{}),e=g(n,f.relative),!r(e))?null:(f.inherit&&(t=ut(rt,t||{},v.$current,e)),o=e&&f.lossy?e.navigable:e,!o||o.url===i||o.url===null)?null:ft.href(o.url,b(e.params.$$keys().concat("#"),t||{}),{absolute:f.absolute})},v.get=function(n,t){if(arguments.length===0)return y(p(it),function(n){return it[n].self});var i=g(n,t||v.$current);return i&&i.self?i.self:null},v}function wt(n,t,i,r,u,f){function e(n,t,i){function r(t){return n.params[t].location!="search"}var u=n.params.$$keys().filter(r),f=ft.apply({},[n.params].concat(u)),e=new l.ParamSet(f);return e.$$equals(t,i)}if(!f.reload&&n===i&&(u===i.locals||n.self.reloadOnSearch===!1&&e(i,r,t)))return!0}var tt,it={},v,rt={},ot="abstract",k={parent:function(n){if(r(n.parent)&&n.parent)return g(n.parent);var t=/^(.+)\.[^.]+$/.exec(n.name);return t?g(t[1]):tt},data:function(n){return n.parent&&n.parent.data&&(n.data=n.self.data=w(n.parent.data,n.data)),n.data},url:function(n){var t=n.url,i={params:n.params||{}};if(e(t))return t.charAt(0)=="^"?h.compile(t.substring(1),i):(n.parent.navigable||tt).url.concat(t,i);if(!t||h.isMatcher(t))return t;throw new Error("Invalid url '"+t+"' in state '"+n+"'");},navigable:function(n){return n.url?n:n.parent?n.parent.navigable:null},ownParams:function(n){var t=n.url&&n.url.params||new l.ParamSet;return f(n.params||{},function(n,i){t[i]||(t[i]=new l.Param(i,null,n,"config"))}),t},params:function(n){var t=ft(n.ownParams,n.ownParams.$$keys());return n.parent&&n.parent.params?u(n.parent.params.$$new(),t):new l.ParamSet},views:function(n){var t={};return f(r(n.views)?n.views:{"":n},function(i,r){r.indexOf("@")<0&&(r+="@"+n.parent.name);i.resolveAs=i.resolveAs||n.resolveAs||"$resolve";t[r]=i}),t},path:function(n){return n.parent?n.parent.path.concat(n):[]},includes:function(n){var t=n.parent?u({},n.parent.includes):{};return t[n.name]=!0,t},$delegates:{}};tt=et({name:"",url:"^",views:null,abstract:!0});tt.navigable=null;this.decorator=yt;this.state=pt;this.$get=st;st.$inject=["$rootScope","$q","$view","$injector","$resolve","$stateParams","$urlRouter","$location","$urlMatcherFactory"]}function lt(){function n(n,t){return{load:function(n,i){var r;return i=u({template:null,controller:null,view:null,locals:null,notify:!0,async:!0,params:{}},i),i.view&&(r=t.fromConfig(i.view,i.params,i.locals)),r}}}this.$get=n;n.$inject=["$rootScope","$templateFactory"]}function ri(){var n=!1;this.useAnchorScroll=function(){n=!0};this.$get=["$anchorScroll","$timeout",function(t,i){return n?t:function(n){return i(function(){n[0].scrollIntoView()},0,!1)}}]}function at(n,i,r,u,f){function h(){return i.has?function(n){return i.has(n)?i.get(n):null}:function(n){try{return i.get(n)}catch(t){return null}}}function c(n,i){var u=function(){return{enter:function(n,t,i){t.after(n);i()},leave:function(n,t){n.remove();t()}}},r;return e?{enter:function(n,i,r){t.version.minor>2?e.enter(n,null,i).then(r):e.enter(n,null,i,r)},leave:function(n,i){t.version.minor>2?e.leave(n).then(i):e.leave(n,i)}}:o?(r=o&&o(i,n),{enter:function(n,t,i){r.enter(n,null,t);i()},leave:function(n,t){r.leave(n);t()}}):u()}var s=h(),o=s("$animator"),e=s("$animate");return{restrict:"ECA",terminal:!0,priority:400,transclude:"element",compile:function(i,e,o){return function(i,e,s){function k(){if(a&&(a.remove(),a=null),h&&(h.$destroy(),h=null),l){var n=l.data("$uiViewAnim");p.leave(l,function(){n.$$animLeave.resolve();a=null});a=l;l=null}}function w(c){var w,a=yt(i,s,e,u),g=a&&n.$current&&n.$current.locals[a],d;(c||g!==y)&&(w=i.$new(),y=n.$current.locals[a],w.$emit("$viewContentLoading",a),d=o(w,function(n){var u=f.defer(),o=f.defer(),s={$animEnter:u.promise,$animLeave:o.promise,$$animLeave:o};n.data("$uiViewAnim",s);p.enter(n,e,function(){u.resolve();h&&h.$emit("$viewContentAnimationEnded");(t.isDefined(v)&&!v||i.$eval(v))&&r(n)});k()}),l=d,h=w,h.$emit("$viewContentLoaded",a),h.$eval(b))}var a,l,h,y,b=s.onload||"",v=s.autoscroll,p=c(s,i),d=e.inheritedData("$uiView");i.$on("$stateChangeSuccess",function(){w(!1)});w(!0)}}}}function vt(n,i,r,u){return{restrict:"ECA",priority:-400,compile:function(f){var e=f.html();return function(f,s,h){var v=r.$current,y=yt(f,h,s,u),c=v&&v.locals[y],a,p,l;c&&(s.data("$uiView",{name:y,state:c.$$state}),s.html(c.$template?c.$template:e),a=t.extend({},c),f[c.$$resolveAs]=a,p=n(s.contents()),c.$$controller&&(c.$scope=f,c.$element=s,l=i(c.$$controller,c),c.$$controllerAs&&(f[c.$$controllerAs]=l,f[c.$$controllerAs][c.$$resolveAs]=a),o(l.$onInit)&&l.$onInit(),s.data("$ngControllerController",l),s.children().data("$ngControllerController",l)),p(f))}}}}function yt(n,t,i,r){var u=r(t.uiView||t.name||"")(n),f=i.inheritedData("$uiView");return u.indexOf("@")>=0?u:u+"@"+(f?f.state.name:"")}function pt(n,t){var r=n.match(/^\s*({[^}]*})\s*$/),i;if(r&&(n=t+"("+r[1]+")"),i=n.replace(/\n/g," ").match(/^([^(]+?)\s*(\((.*)\))?$/),!i||i.length!==4)throw new Error("Invalid state ref '"+n+"'");return{state:i[1],paramExpr:i[3]||null}}function wt(n){var t=n.parent().inheritedData("$uiView");if(t&&t.state&&t.state.name)return t.state}function bt(n){var i=Object.prototype.toString.call(n.prop("href"))==="[object SVGAnimatedString]",t=n[0].nodeName==="FORM";return{attr:t?"action":i?"xlink:href":"href",isAnchor:n.prop("tagName").toUpperCase()==="A",clickable:!t}}function kt(n,t,i,r,u){return function(f){var h=f.which||f.button,e=u(),o,s;h>1||f.ctrlKey||f.metaKey||f.shiftKey||n.attr("target")||(o=i(function(){t.go(e.state,e.params,e.options)}),f.preventDefault(),s=r.isAnchor&&!e.href?1:0,f.preventDefault=function(){s--<=0&&i.cancel(o)})}}function ui(n,t){return{relative:wt(n)||t.$current,inherit:!0}}function dt(n,i){return{restrict:"A",require:["?^uiSrefActive","?^uiSrefActiveEq"],link:function(r,f,e,o){var h=pt(e.uiSref,n.current.name),s={state:h.state,href:null,params:null},c=bt(f),y=o[1]||o[0],l=null,a,v;(s.options=u(ui(f,n),e.uiSrefOpts?r.$eval(e.uiSrefOpts):{}),v=function(i){i&&(s.params=t.copy(i));s.href=n.href(h.state,s.params,s.options);l&&l();y&&(l=y.$$addStateInfo(h.state,s.params));s.href!==null&&e.$set(c.attr,s.href)},h.paramExpr&&(r.$watch(h.paramExpr,function(n){n!==s.params&&v(n)},!0),s.params=t.copy(r.$eval(h.paramExpr))),v(),c.clickable)&&(a=kt(f,n,i,c,function(){return s}),f.bind("click",a),r.$on("$destroy",function(){f.unbind("click",a)}))}}}function gt(n,t){return{restrict:"A",require:["?^uiSrefActive","?^uiSrefActiveEq"],link:function(i,r,u,f){function a(t){e.state=t[0];e.params=t[1];e.options=t[2];e.href=n.href(e.state,e.params,e.options);s&&s();c&&(s=c.$$addStateInfo(e.state,e.params));e.href&&u.$set(o.attr,e.href)}var o=bt(r),c=f[1]||f[0],v=[u.uiState,u.uiStateParams||null,u.uiStateOpts||null],l="["+v.map(function(n){return n||"null"}).join(", ")+"]",e={state:null,params:null,options:null,href:null},s=null,h;(i.$watch(l,a,!0),a(i.$eval(l)),o.clickable)&&(h=kt(r,n,t,o,function(){return e}),r.bind("click",h),i.$on("$destroy",function(){r.unbind("click",h)}))}}}function it(n,t,i){return{restrict:"A",controller:["$scope","$element","$attrs","$timeout",function(t,r,u,o){function y(t,i,u){var o=n.get(t,wt(r)),f=b(t,i),e={state:o||{name:t},params:i,hash:f};return h.push(e),l[f]=u,function(){var n=h.indexOf(e);n!==-1&&h.splice(n,1)}}function b(n,i){if(!e(n))throw new Error("state should be a string");return s(i)?n+rt(i):(i=t.$eval(i),s(i))?n+rt(i):n}function v(){for(var n=0;n<h.length;n++)k(h[n].state,h[n].params)?p(r,l[h[n].hash]):w(r,l[h[n].hash]),d(h[n].state,h[n].params)?p(r,a):w(r,a)}function p(n,t){o(function(){n.addClass(t)})}function w(n,t){n.removeClass(t)}function k(t,i){return n.includes(t.name,i)}function d(t,i){return n.is(t.name,i)}var h=[],l={},a,c;a=i(u.uiSrefActiveEq||"",!1)(t);try{c=t.$eval(u.uiSrefActive)}catch(g){}c=c||i(u.uiSrefActive||"",!1)(t);s(c)&&f(c,function(i,r){if(e(i)){var u=pt(i,n.current.name);y(u.state,t.$eval(u.paramExpr),r)}});this.$$addStateInfo=function(n,t){if(!s(c)||!(h.length>0)){var i=y(n,t,c);return v(),i}};t.$on("$stateChangeSuccess",v);v()}]}}function ni(n){var t=function(t,i){return n.is(t,i)};return t.$stateful=!0,t}function ti(n){var t=function(t,i,r){return n.includes(t,i,r)};return t.$stateful=!0,t}var r=t.isDefined,o=t.isFunction,e=t.isString,s=t.isObject,a=t.isArray,f=t.forEach,u=t.extend,d=t.copy,rt=t.toJson,l;t.module("ui.router.util",["ng"]);t.module("ui.router.router",["ui.router.util"]);t.module("ui.router.state",["ui.router.router","ui.router.util"]);t.module("ui.router",["ui.router.state"]);t.module("ui.router.compat",["ui.router"]);et.$inject=["$q","$injector"];t.module("ui.router.util").service("$resolve",et);ot.$inject=["$http","$templateCache","$injector"];t.module("ui.router.util").service("$templateFactory",ot);v.prototype.concat=function(n,t){var i={caseInsensitive:l.caseInsensitive(),strict:l.strictMode(),squash:l.defaultSquashPolicy()};return new v(this.sourcePath+n+this.sourceSearch,u(i,t),this)};v.prototype.toString=function(){return this.source};v.prototype.exec=function(n,t){function v(n){function t(n){return n.split("").reverse().join("")}function i(n){return n.replace(/\\-/g,"-")}var r=t(n).split(/-(?!\\)/),u=y(r,t);return y(u,i).reverse()}var h=this.regexp.exec(n),u,i;if(!h)return null;t=t||{};var c=this.parameters(),a=c.length,l=this.segments.length-1,s={},o,f,e;if(l!==h.length-1)throw new Error("Unbalanced capture group in route '"+this.source+"'");for(o=0;o<l;o++){for(e=c[o],u=this.params[e],i=h[o+1],f=0;f<u.replace.length;f++)u.replace[f].from===i&&(i=u.replace[f].to);i&&u.array===!0&&(i=v(i));r(i)&&(i=u.type.decode(i));s[e]=u.value(i)}for(;o<a;o++){for(e=c[o],s[e]=this.params[e].value(t[e]),u=this.params[e],i=t[e],f=0;f<u.replace.length;f++)u.replace[f].from===i&&(i=u.replace[f].to);r(i)&&(i=u.type.decode(i));s[e]=u.value(i)}return s};v.prototype.parameters=function(n){return r(n)?this.params[n]||null:this.$$paramNames};v.prototype.validates=function(n){return this.params.$$validates(n)};v.prototype.format=function(n){function nt(n){return encodeURIComponent(n).replace(/-/g,function(n){return"%5C%"+n.charCodeAt(0).toString(16).toUpperCase()})}var s,b,k;n=n||{};var h=this.segments,c=this.parameters(),d=this.params;if(!this.validates(n))return null;for(var l=!1,v=h.length-1,g=c.length,i=h[0],r=0;r<g;r++){var tt=r<v,o=c[r],u=d[o],p=u.value(n[o]),w=u.isOptional&&u.type.equals(u.value(),p),f=w?u.squash:!1,t=u.type.encode(p);if(tt)s=h[r+1],b=r+1===v,f===!1?(t!=null&&(i+=a(t)?y(t,nt).join("-"):encodeURIComponent(t)),i+=s):f===!0?(k=i.match(/\/$/)?/\/?(.*)/:/(.*)/,i+=s.match(k)[1]):e(f)&&(i+=f+s),b&&u.squash===!0&&i.slice(-1)==="/"&&(i=i.slice(0,-1));else{if(t==null||w&&f!==!1)continue;if(a(t)||(t=[t]),t.length===0)continue;t=y(t,encodeURIComponent).join("&"+o+"=");i+=(l?"&":"?")+(o+"="+t);l=!0}}return i};h.prototype.is=function(){return!0};h.prototype.encode=function(n){return n};h.prototype.decode=function(n){return n};h.prototype.equals=function(n,t){return n==t};h.prototype.$subPattern=function(){var n=this.pattern.toString();return n.substr(1,n.length-2)};h.prototype.pattern=/.*/;h.prototype.toString=function(){return"{Type:"+this.name+"}"};h.prototype.$normalize=function(n){return this.is(n)?n:this.decode(n)};h.prototype.$asArray=function(n,t){function u(n,t){function u(n,t){return function(){return n[t].apply(n,arguments)}}function e(n){return a(n)?n:r(n)?[n]:[]}function o(n){switch(n.length){case 0:return i;case 1:return t==="auto"?n[0]:n;default:return n}}function s(n){return!n}function f(n,t){return function(i){if(a(i)&&i.length===0)return i;i=e(i);var r=y(i,n);return t===!0?tt(r,s).length===0:o(r)}}function h(n){return function(t,i){var u=e(t),f=e(i),r;if(u.length!==f.length)return!1;for(r=0;r<u.length;r++)if(!n(u[r],f[r]))return!1;return!0}}this.encode=f(u(n,"encode"));this.decode=f(u(n,"decode"));this.is=f(u(n,"is"),!0);this.equals=h(u(n,"equals"));this.pattern=n.pattern;this.$normalize=f(u(n,"$normalize"));this.name=n.name;this.$arrayMode=t}if(!n)return this;if(n==="auto"&&!t)throw new Error("'auto' array mode is for query parameters only");return new u(this,n)};t.module("ui.router.util").provider("$urlMatcherFactory",st);t.module("ui.router.util").run(["$urlMatcherFactory",function(){}]);ht.$inject=["$locationProvider","$urlMatcherFactoryProvider"];t.module("ui.router.router").provider("$urlRouter",ht);ct.$inject=["$urlRouterProvider","$urlMatcherFactoryProvider"];t.module("ui.router.state").factory("$stateParams",function(){return{}}).constant("$state.runtime",{autoinject:!0}).provider("$state",ct).run(["$injector",function(n){n.get("$state.runtime").autoinject&&n.get("$state")}]);lt.$inject=[];t.module("ui.router.state").provider("$view",lt);t.module("ui.router.state").provider("$uiViewScroll",ri);at.$inject=["$state","$injector","$uiViewScroll","$interpolate","$q"];vt.$inject=["$compile","$controller","$state","$interpolate"];t.module("ui.router.state").directive("uiView",at);t.module("ui.router.state").directive("uiView",vt);dt.$inject=["$state","$timeout"];gt.$inject=["$state","$timeout"];it.$inject=["$state","$stateParams","$interpolate"];t.module("ui.router.state").directive("uiSref",dt).directive("uiSrefActive",it).directive("uiSrefActiveEq",it).directive("uiState",gt);ni.$inject=["$state"];ti.$inject=["$state"];t.module("ui.router.state").filter("isState",ni).filter("includedByState",ti)}(window,window.angular);
//# sourceMappingURL=angular-ui-router.min.js.map
