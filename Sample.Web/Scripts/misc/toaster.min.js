(function(){"use strict";angular.module("toaster",["ngAnimate"]).constant("toasterConfig",{limit:0,"tap-to-dismiss":!0,"close-button":!1,"newest-on-top":!0,"time-out":5e3,"icon-classes":{error:"toast-error",info:"toast-info",wait:"toast-wait",success:"toast-success",warning:"toast-warning"},"body-output-type":"","body-template":"toasterBodyTmpl.html","icon-class":"toast-info","position-class":"toast-top-right","title-class":"toast-title","message-class":"toast-message","prevent-duplicates":!1,"mouseover-timer-stop":!0}).service("toaster",["$rootScope","toasterConfig",function(n,t){this.pop=function(t,i,r,u,f,e,o,s,h){if(angular.isObject(t)){var c=t;this.toast={type:c.type,title:c.title,body:c.body,timeout:c.timeout,bodyOutputType:c.bodyOutputType,clickHandler:c.clickHandler,showCloseButton:c.showCloseButton,uid:c.toastId};h=c.toastId;o=c.toasterId}else this.toast={type:t,title:i,body:r,timeout:u,bodyOutputType:f,clickHandler:e,showCloseButton:s,uid:h};n.$emit("toaster-newToast",o,h)};this.clear=function(t,i){n.$emit("toaster-clearToasts",t,i)};for(var i in t["icon-classes"])this[i]=function(n){return function(t,i,r,u,f,e,o,s){angular.isString(t)?this.pop(n,t,i,r,u,f,e,o,s):this.pop(angular.extend(t,{type:n}))}}(i)}]).factory("toasterEventRegistry",["$rootScope",function(n){var u=null,f=null,t=[],i=[],r;return r={setup:function(){u||(u=n.$on("toaster-newToast",function(n,i,r){for(var u=0,f=t.length;u<f;u++)t[u](n,i,r)}));f||(f=n.$on("toaster-clearToasts",function(n,t,r){for(var u=0,f=i.length;u<f;u++)i[u](n,t,r)}))},subscribeToNewToastEvent:function(n){t.push(n)},subscribeToClearToastsEvent:function(n){i.push(n)},unsubscribeToNewToastEvent:function(n){var i=t.indexOf(n);i>=0&&t.splice(i,1);t.length===0&&(u(),u=null)},unsubscribeToClearToastsEvent:function(n){var t=i.indexOf(n);t>=0&&i.splice(t,1);i.length===0&&(f(),f=null)}},{setup:r.setup,subscribeToNewToastEvent:r.subscribeToNewToastEvent,subscribeToClearToastsEvent:r.subscribeToClearToastsEvent,unsubscribeToNewToastEvent:r.unsubscribeToNewToastEvent,unsubscribeToClearToastsEvent:r.unsubscribeToClearToastsEvent}}]).directive("toasterContainer",["$parse","$rootScope","$interval","$sce","toasterConfig","toaster","toasterEventRegistry",function(n,t,i,r,u,f,e){return{replace:!0,restrict:"EA",scope:!0,link:function(t,o,s){function v(n,r){n.timeoutPromise=i(function(){t.removeToast(n.id)},r,1)}function y(i,u){var f,s,e,o,y,v;if(i.type=h["icon-classes"][i.type],i.type||(i.type=h["icon-class"]),h["prevent-duplicates"]===!0)if(c(u)){if(t.toasters.length>0&&t.toasters[t.toasters.length-1].body===i.body)return}else for(f=0,s=t.toasters.length;f<s;f++)t.toasters[f].uid===u&&(l(f),f--,s=t.toasters.length);i.id=++a;c(u)||(i.uid=u);e=h["close-button"];typeof i.showCloseButton=="boolean"||(typeof e=="boolean"?i.showCloseButton=e:typeof e=="object"?(o=e[i.type],typeof o!="undefined"&&o!==null&&(i.showCloseButton=o)):i.showCloseButton=!1);i.bodyOutputType=i.bodyOutputType||h["body-output-type"];switch(i.bodyOutputType){case"trustedHtml":i.html=r.trustAsHtml(i.body);break;case"template":i.bodyTemplate=i.body||h["body-template"];break;case"templateWithData":y=n(i.body||h["body-template"]);v=y(t);i.bodyTemplate=v.template;i.data=v.data}t.configureTimer(i);h["newest-on-top"]===!0?(t.toasters.unshift(i),h.limit>0&&t.toasters.length>h.limit&&t.toasters.pop()):(t.toasters.push(i),h.limit>0&&t.toasters.length>h.limit&&t.toasters.shift())}function l(n){var r=t.toasters[n];r&&(r.timeoutPromise&&i.cancel(r.timeoutPromise),t.toasters.splice(n,1))}function p(n){for(var i=t.toasters.length-1;i>=0;i--)c(n)?l(i):t.toasters[i].uid==n&&l(i)}function c(n){return angular.isUndefined(n)||n===null}var a=0,h;h=angular.extend({},u,t.$eval(s.toasterOptions));t.config={toasterId:h["toaster-id"],position:h["position-class"],title:h["title-class"],message:h["message-class"],tap:h["tap-to-dismiss"],closeButton:h["close-button"],animation:h["animation-class"],mouseoverTimer:h["mouseover-timer-stop"]};t.$on("$destroy",function(){e.unsubscribeToNewToastEvent(t._onNewToast);e.unsubscribeToClearToastsEvent(t._onClearToasts)});t.configureTimer=function(n){var t=angular.isNumber(n.timeout)?n.timeout:h["time-out"];typeof t=="object"&&(t=t[n.type]);t>0&&v(n,t)};t.removeToast=function(n){for(var i=0,r=t.toasters.length;i<r;i++)if(t.toasters[i].id===n){l(i);break}};t.toasters=[];t._onNewToast=function(n,i,r){(c(t.config.toasterId)&&c(i)||!c(t.config.toasterId)&&!c(i)&&t.config.toasterId==i)&&y(f.toast,r)};t._onClearToasts=function(n,i,r){(i=="*"||c(t.config.toasterId)&&c(i)||!c(t.config.toasterId)&&!c(i)&&t.config.toasterId==i)&&p(r)};e.setup();e.subscribeToNewToastEvent(t._onNewToast);e.subscribeToClearToastsEvent(t._onClearToasts)},controller:["$scope","$element","$attrs",function(n){n.stopTimer=function(t){n.config.mouseoverTimer===!0&&t.timeoutPromise&&(i.cancel(t.timeoutPromise),t.timeoutPromise=null)};n.restartTimer=function(t){n.config.mouseoverTimer===!0?t.timeoutPromise||n.configureTimer(t):t.timeoutPromise===null&&n.removeToast(t.id)};n.click=function(t,i){if(n.config.tap===!0||t.showCloseButton===!0&&i===!0){var r=!0;t.clickHandler&&(angular.isFunction(t.clickHandler)?r=t.clickHandler(t,!0):angular.isFunction(n.$parent.$eval(t.clickHandler))?r=n.$parent.$eval(t.clickHandler)(t,t.showCloseButton):console.log("TOAST-NOTE: Your click handler is not inside a parent scope of toaster-container."));r&&n.removeToast(t.id)}}}],template:'<div id="toast-container" ng-class="[config.position, config.animation]"><div ng-repeat="toaster in toasters" class="toast" ng-class="toaster.type" ng-click="click(toaster)" ng-mouseover="stopTimer(toaster)" ng-mouseout="restartTimer(toaster)"><button type="button" class="toast-close-button" ng-show="toaster.showCloseButton" ng-click="click(toaster, true)">&times;<\/button><div ng-class="config.title">{{toaster.title}}<\/div><div ng-class="config.message" ng-switch on="toaster.bodyOutputType"><div ng-switch-when="trustedHtml" ng-bind-html="toaster.html"><\/div><div ng-switch-when="template"><div ng-include="toaster.bodyTemplate"><\/div><\/div><div ng-switch-when="templateWithData"><div ng-include="toaster.bodyTemplate"><\/div><\/div><div ng-switch-default >{{toaster.body}}<\/div><\/div><\/div><\/div>'}}])})(window,document);