(function(){"use strict";function t(n){return["$window","$rootScope","$timeout",function(t,i,r){return{restrict:"EA",compile:function(u,f){u.addClass("ng-hide");t.applicationCache&&(t.applicationCache.addEventListener(n,function(){u.removeClass("ng-hide");var n=i.$eval(f.dismissDelay);n>=0&&r(function(){u.addClass("ng-hide")},n,!0)}),angular.isUndefined(f.dismissOnClick)||u.bind("click",function(){u.addClass("ng-hide")}))}}}]}var n={};["cached","checking","downloading","error","noupdate","obsolete","updateready"].map(function(i){n[i]=t(i)});angular.module("ng-appcache",[]).factory("appcache",["$window","$rootScope","$q","$timeout",function(n,t,i,r){function e(){return i.reject("unsupported")}var u=this,f;return n.applicationCache?(u.abortUpdate=function(){try{return n.applicationCache.abort()===undefined?!1:!0}catch(t){if(!t.message.match(/^'undefined'/))throw t;return!1}},u.checkUpdate=function(){function e(){u.removeEventListener("updateready",o);u.removeEventListener("noupdate",s)}function o(){r(function(){t.resolve();e()},0,!0)}function s(){r(function(){t.reject();e()},0,!0)}var t=i.defer();u.addEventListener("updateready",o);u.addEventListener("noupdate",s);try{n.applicationCache.update()}catch(f){if(!(f.name==="InvalidStateError"||f.name==="INVALID_STATE_ERR"))throw f;t.reject(f.name)}return t.promise},u.swapCache=function(){var r=i.defer();try{n.applicationCache.swapCache();r.resolve()}catch(t){if(!(t.name==="InvalidStateError"||t.name==="INVALID_STATE_ERR"))throw t;r.reject(t.name)}return r.promise},u.addEventListener=function(t,i,r){r=angular.isUndefined(r)?!1:r;n.applicationCache.addEventListener(t,i,r)},u.removeEventListener=function(t,i,r){r=angular.isUndefined(r)?!1:r;n.applicationCache.removeEventListener(t,i,r)},u.on=u.addEventListener,u.off=u.removeEventListener,f={0:"UNCACHED",1:"IDLE",2:"CHECKING",3:"DOWNLOADING",4:"UPDATEREADY",5:"OBSOLETE"},u.status=n.applicationCache.status,u.textStatus=f[n.applicationCache.status],t.$watch(function(){return n.applicationCache.status},function(n){u.status=n;u.textStatus=f[n]}),n.applicationCache.addEventListener("error",function(){t.$digest()},!1)):(u.abortUpdate=function(){return!1},u.checkUpdate=e,u.swapCache=e,u.addEventListener=function(){},u.removeEventListener=function(){},u.on=function(){},u.off=function(){}),u}]).directive("appcacheCached",n.cached).directive("appcacheChecking",n.checking).directive("appcacheDownloading",n.downloading).directive("appcacheError",n.error).directive("appcacheNoupdate",n.noupdate).directive("appcacheObsolete",n.obsolete).directive("appcacheUpdateready",n.updateready)})();